(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],u=0,m=[];u<o.length;u++)r=o[u],s[r]&&m.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(m.length)m.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],a=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(a=!1)}a&&(n.splice(t--,1),e=r(r.s=i[0]))}return e}var a={},s={app:0},n=[];function r(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=a,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"07af":function(e,t,i){"use strict";var a=i("3a92"),s=i.n(a);s.a},"0b24":function(e,t,i){e.exports=i.p+"img/wait.184c1bee.png"},"148c":function(e,t,i){},1914:function(e,t,i){},"21bb":function(e,t,i){"use strict";var a=i("1914"),s=i.n(a);s.a},"238b":function(e,t,i){"use strict";var a=i("4f4b"),s=i.n(a);s.a},2728:function(e,t,i){"use strict";var a=i("148c"),s=i.n(a);s.a},2856:function(e,t,i){},"3a92":function(e,t,i){},4170:function(e,t,i){},"43bb":function(e,t,i){"use strict";var a=i("4ea9"),s=i.n(a);s.a},4609:function(e,t,i){},"4ea9":function(e,t,i){},"4f4b":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("7f7f"),i("a481"),i("7844");var a=i("5596"),s=(i("4b0a"),i("2bb1")),n=(i("e7e5"),i("d399")),r=(i("2994"),i("2bdd")),o=(i("c194"),i("7744")),c=(i("8a58"),i("e41f")),l=(i("5f5f"),i("f253")),d=(i("cadf"),i("551c"),i("097d"),i("2b0e")),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("keep-alive",[e.$route.meta.keepAlive?i("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():i("router-view")],1)},m=[],h=(i("5c0b"),i("2877")),p={},f=Object(h["a"])(p,u,m,!1,null,null,null);f.options.__file="App.vue";var v,g,b=f.exports,_={userInfo:null,itemType:null,selected:[]},C=_,k=Object(h["a"])(C,v,g,!1,null,null,null);k.options.__file="global.vue";var $=k.exports,y=i("8c4f"),O=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page home"},[i("van-swipe",{staticStyle:{"padding-bottom":"10px","margin-bottom":"10px"},attrs:{autoplay:3e3}},e._l(e.sliders,function(e){return i("van-swipe-item",[i("a",{attrs:{href:e.url}},[i("img",{staticClass:"banner-item",attrs:{src:e.image,alt:e.title}})])])})),i("div",{staticClass:"catalog-section"},[i("div",{staticClass:"catalog-wrapper"},[e._l(e.itemTypes,function(t){return[i("a",{key:t.id,staticClass:"catlog-item",on:{click:function(i){e.goToPick(t)}}},[i("img",{attrs:{src:t.img_1,alt:t.name}})])]})],2)])],1)},w=[],x={name:"home",created:function(){var e=this;this.$http.post("public/api/customer/get_user_info_by_token.html",{token:this.$global.userInfo.token}).then(function(t){e.$global.userInfo.mobile=t.data.data.mobile}).catch(function(e){console.log(e)}),this.$http.post("public/api/common/getGoods.html").then(function(t){e.itemTypes=t.data.data}).catch(function(e){console.log(e)}),this.$http.post("public/api/common/getSlideList.html").then(function(t){e.sliders=t.data.data}).catch(function(e){console.log(e)})},data:function(){return{itemTypes:[],sliders:[]}},methods:{goToPick:function(e){var t;this.$global.selected=[],this.$global.itemType=e,1===e.op_type?t="multipick":0===e.op_type&&(e.items.length>1?t="pick":(t="order",this.$global.selected=e.items)),this.$router.push({name:t,params:e})}}},P=x,T=(i("21bb"),Object(h["a"])(P,O,w,!1,null,null,null));T.options.__file="Home.vue";var I=T.exports,S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page pick"},[i("h2",{staticClass:"section-head"},[e._v("\n    电器选择\n  ")]),i("div",{staticClass:"selection-wrapper"},e._l(e.itemType.items,function(t){return i("div",{key:t.id,staticClass:"selection-item",class:{selected:e.isSelected(t)},on:{click:function(i){e.singleSelect(t)}}},[i("img",{staticClass:"selection-icon",attrs:{src:t.img_1,alt:t.name}})])})),i("div",{staticClass:"pick-footer"},[i("div",{staticClass:"pick-submit",on:{click:function(t){e.submit()}}},[e._v("\n      立即下单\n    ")])])])},D=[],j={name:"pick",methods:{singleSelect:function(e){this.$set(this.selected,0,e)},isSelected:function(e){return e===this.selected[0]},submit:function(){this.selected.length&&this.$router.push({name:"order",params:{selected:this.selected,itemType:this.itemType}})}},data:function(){return{selected:this.$global.selected,itemType:this.$global.itemType}}},E=j,V=(i("e823"),Object(h["a"])(E,S,D,!1,null,null,null));V.options.__file="Pick.vue";var M=V.exports,N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page pick"},[i("h2",{staticClass:"section-head"},[e._v("\n    回收资源选择\n  ")]),i("div",{staticClass:"selection-wrapper"},e._l(e.itemType.items,function(t){return i("div",{key:t.id,staticClass:"selection-item",class:{selected:e.isMultiSelected(t)},on:{click:function(i){e.multiSelect(t)}}},[i("img",{staticClass:"selection-icon",attrs:{src:t.img_1,alt:t.name}})])})),i("div",{staticClass:"pick-footer"},[e._m(0),i("div",{staticClass:"pick-submit",on:{click:function(t){e.submit()}}},[e._v("\n      立即下单\n    ")])])])},A=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pick-tips"},[i("i",{staticClass:"icon-point"}),i("span",[e._v("以上资源支持多选")])])}],L={name:"pick",methods:{submit:function(){this.selected.length&&this.$router.push({name:"order",params:{selected:this.selected,itemType:this.itemType}})},multiSelect:function(e){var t=this.selected.indexOf(e);t>-1?this.selected.splice(t,1):this.selected.push(e)},isMultiSelected:function(e){return this.selected.indexOf(e)>-1}},data:function(){return{selected:this.$global.selected,itemType:this.$global.itemType}}},F=L,H=(i("43bb"),Object(h["a"])(F,N,A,!1,null,null,null));H.options.__file="MultiPick.vue";var J=H.exports,q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page order"},[e._m(0),i("div",{staticClass:"order-section top"},[i("div",{staticClass:"order-field"},[i("span",{staticClass:"order-label"},[e._v("回收种类")]),i("div",{staticClass:"order-value"},[e._v(e._s(e.picked.itemType.name))])]),e.picked.selected?i("div",{staticClass:"order-field"},[i("span",{staticClass:"order-label"},[e._v("回收资源")]),i("div",{staticClass:"order-value"},[e._v(e._s(e.selectedText()))])]):e._e(),i("div",{staticClass:"order-field"},[i("span",{staticClass:"order-label",on:{click:e.openPicker}},[e._v("预约时间")]),i("div",{staticClass:"order-value"},[i("div",{staticClass:"time-text"},[e._v(e._s(e.date))]),i("input",{staticStyle:{opacity:"0",position:"absolute",right:"0",width:"70%"},attrs:{type:"text",id:"datetime-picker"}}),i("i",{staticClass:"icon-forward"})])])]),i("div",{staticClass:"order-section second"},[i("div",{staticClass:"order-field"},[i("span",{staticClass:"order-label"},[e._v("联系人")]),i("div",{staticClass:"order-value"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],staticClass:"order-field__control",attrs:{type:"text",placeholder:"请填写预约人的姓名"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}}),i("div",{staticClass:"error",class:{"show-error":e.hasError("userName")}},[e._m(1),i("div",{staticClass:"error-text"},[e._v("请填写正确的联系人")])])])]),i("div",{staticClass:"order-field user-info"},[i("span",{staticClass:"order-label"},[e._v("手机号")]),i("div",{staticClass:"order-value"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],staticClass:"order-field__control",attrs:{type:"tel",placeholder:"请填写预约手机号码",maxlength:"11"},domProps:{value:e.mobile},on:{input:function(t){t.target.composing||(e.mobile=t.target.value)}}}),i("div",{staticClass:"error",class:{"show-error":e.hasError("mobile")}},[e._m(2),i("div",{staticClass:"error-text"},[e._v("请填写正确的手机号码")])])])]),i("div",{staticClass:"order-field user-info"},[i("span",{staticClass:"order-label"},[e._v("地址")]),i("div",{staticClass:"order-value"},[i("input",{staticClass:"order-field__control",attrs:{id:"communityPicker",type:"text",placeholder:"请选择预约地址"}}),i("i",{staticClass:"icon-forward"}),i("div",{staticClass:"error",class:{"show-error":e.hasError("community")}},[e._m(3),i("div",{staticClass:"error-text"},[e._v("请选择预约地址")])])])]),i("div",{staticClass:"order-field user-info"},[i("div",{staticClass:"order-value"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.addressDetail,expression:"addressDetail"}],staticClass:"order-field__control",attrs:{type:"text",placeholder:"请填写详细单元号住户号"},domProps:{value:e.addressDetail},on:{input:function(t){t.target.composing||(e.addressDetail=t.target.value)}}}),i("div",{staticClass:"error",class:{"show-error":e.hasError("addressDetail")}},[e._m(4),i("div",{staticClass:"error-text"},[e._v("请填写详细单元号住户号")])])])]),i("div",{staticClass:"order-field user-info",on:{click:function(t){e.addition=!e.addition}}},[i("span",{staticClass:"order-label long"},[e._v("我有有害垃圾，需要顺带回收")]),i("div",{},[i("i",{staticClass:"order-addition",class:{active:e.addition}})])]),i("div",{staticClass:"order-submit",on:{click:function(t){e.submitOrder()}}},[e._v("\n        提交订单\n      ")])])])},R=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"order-head"},[i("div",{staticClass:"order-head-text"},[e._v("预约下单")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("i",{staticClass:"icon-waring"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("i",{staticClass:"icon-waring"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("i",{staticClass:"icon-waring"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("i",{staticClass:"icon-waring"})])}],B=i("b547"),G=B["a"],W=(i("2728"),Object(h["a"])(G,q,R,!1,null,null,null));W.options.__file="Order.vue";var z=W.exports,U=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page myOrder"},[i("h2",{staticClass:"section-head"},[e._v("\n      我的订单\n      ")]),i("div",{staticClass:"tab"},[i("div",{staticClass:"tablinks",class:{active:"unfinished"===e.selectedTab},on:{click:function(t){e.selectedTab="unfinished"}}},[i("div",{staticClass:"tablinks-title"},[e._v("\n                  待服务\n              ")])]),i("div",{staticClass:"tablinks",class:{active:"finished"===e.selectedTab},on:{click:function(t){e.selectedTab="finished"}}},[i("div",{staticClass:"tablinks-title"},[e._v("\n                  已完成\n              ")])])]),"unfinished"===e.selectedTab?i("div",{staticClass:"tabcontent"},[i("van-list",{attrs:{finished:e.preOrderFinished,offset:100},on:{load:e.preOrderOnLoad},model:{value:e.preOrderLoading,callback:function(t){e.preOrderLoading=t},expression:"preOrderLoading"}},e._l(e.preOrders,function(t){return i("OrderItem",{key:t.order_id,attrs:{orderData:t},on:{cancleOrder:function(i){e.cancleConfirm(t)},orderAgain:function(t){e.orderAgain()}}})})),i("div",{directives:[{name:"show",rawName:"v-show",value:e.preOrdersPage&&!e.preOrders.length,expression:"preOrdersPage && !preOrders.length"}],staticClass:"no-order"},[i("div",{staticClass:"no-order-text"},[e._v("订单内空空如也")]),i("div",{staticClass:"no-order-redirect",on:{click:function(t){e.orderAgain()}}},[e._v("预约下单")])])],1):e._e(),"finished"===e.selectedTab?i("div",{staticClass:"tabcontent"},[i("van-list",{attrs:{finished:e.orderFinished,offset:100},on:{load:e.orderOnLoad},model:{value:e.orderLoading,callback:function(t){e.orderLoading=t},expression:"orderLoading"}},e._l(e.orders,function(t){return i("OrderItem",{key:t.order_id,attrs:{orderData:t,status:"finished"},on:{orderAgain:function(t){e.orderAgain()}}})})),i("div",{directives:[{name:"show",rawName:"v-show",value:e.ordersPage&&!e.orders.length,expression:"ordersPage && !orders.length"}],staticClass:"no-order"},[i("div",{staticClass:"no-order-text"},[e._v("订单内空空如也")]),i("div",{staticClass:"no-order-redirect",on:{click:function(t){e.orderAgain()}}},[e._v("预约下单")])])],1):e._e(),i("CancleModal",{directives:[{name:"show",rawName:"v-show",value:e.showModal,expression:"showModal"}],on:{cancle:function(t){e.hideModal()},comfirmed:function(t){e.cancleOrder()}}})],1)},Y=[],K=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"order-item"},[i("div",{staticClass:"order-item-head"},[i("span",{staticClass:"order-code"},[e._v("\n            订单号："+e._s(e.orderData["order_sn"])+"\n        ")]),i("span",{staticClass:"order-status"},[e._v("\n            "+e._s("finished"===e.status?"回收已完成":"等待服务")+"\n        ")])]),i("div",{staticClass:"order-item-content"},[i("div",{staticClass:"order-detail-item"},[i("label",{staticClass:"order-content-label"},[e._v("\n                预约时间：\n            ")]),i("span",{staticClass:"order-content-value"},[e._v(e._s(e.orderData.finished_time))])]),i("div",{staticClass:"order-detail-item"},[i("label",{staticClass:"order-content-label"},[e._v("\n                回收类型：\n            ")]),i("span",{staticClass:"order-content-value"},[e._v(e._s(e.orderData.goods[0].pname))])]),i("div",{staticClass:"order-detail-item"},[i("label",{staticClass:"order-content-label"},[e._v("\n                资源类型：\n            ")]),i("span",{staticClass:"order-content-value"},[e._v("\n                "+e._s(e.orderData.goods.map(function(e){return e.name}).join(" "))+"\n            ")])])]),i("div",{staticClass:"order-item-footer"},["finished"!==e.status?i("span",{staticClass:"btn-order btn-cancle",on:{click:function(t){e.cancleOrder()}}},[e._v("\n            取消预约\n        ")]):e._e(),i("span",{staticClass:"btn-order btn-submit",on:{click:function(t){e.orderAgain()}}},[e._v("\n            再次预约\n        ")])])])},Q=[],X={name:"OrderItem",props:{orderData:{type:Object},status:status},methods:{cancleOrder:function(){this.$emit("cancleOrder")},orderAgain:function(){this.$emit("orderAgain")}}},Z=X,ee=(i("07af"),Object(h["a"])(Z,K,Q,!1,null,null,null));ee.options.__file="OrderItem.vue";var te=ee.exports,ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modal"},[i("div",{staticClass:"modal-container"},[e._m(0),i("div",{staticClass:"modal-footer"},[i("span",{staticClass:"modal-comfirmed",on:{click:function(t){e.comfirmed()}}},[e._v("\n                取消预约\n            ")]),i("span",{staticClass:"modal-cancle",on:{click:function(t){e.cancle()}}},[e._v("\n                再等一会\n            ")])])])])},ae=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-content"},[a("img",{staticClass:"modal-content-icon",attrs:{src:i("0b24"),alt:"等等"}}),a("div",{staticClass:"modal-content-text"},[e._v("\n                收件员正在快马加鞭赶过来\n                "),a("br"),e._v("\n                确定要取消么\n            ")])])}],se={methods:{comfirmed:function(){this.$emit("comfirmed")},cancle:function(){this.$emit("cancle")}}},ne=se,re=(i("238b"),Object(h["a"])(ne,ie,ae,!1,null,null,null));re.options.__file="CancleModal.vue";var oe=re.exports,ce={components:{OrderItem:te,CancleModal:oe},data:function(){return{selectedTab:"unfinished",showModal:!1,selectedOrder:null,preOrders:[],orders:[],preOrderLoading:!1,preOrderFinished:!1,preOrdersTotal:0,preOrdersPage:0,orderLoading:!1,orderFinished:!1,ordersTotal:0,ordersPage:0}},methods:{preOrderOnLoad:function(){var e=this;this.$http.post("public/api/customer/getPreOrders.html",{token:this.$global.userInfo.token,p:this.preOrdersPage}).then(function(t){e.preOrders=e.preOrders.concat(t.data.data.items),e.preOrdersTotal=t.data.data.total,e.preOrderLoading=!1,e.preOrdersPage++,e.preOrdersTotal===e.preOrders.length&&(e.preOrderFinished=!0)})},orderOnLoad:function(){var e=this;this.$http.post("public/api/customer/getOrders.html",{token:this.$global.userInfo.token,p:this.ordersPage}).then(function(t){e.orders=e.orders.concat(t.data.data.items),e.ordersTotal=t.data.data.total,e.orderLoading=!1,e.ordersPage++,e.ordersTotal===e.orders.length&&(e.orderFinished=!0)})},reloadPreOrder:function(){this.preOrders=[],this.preOrderLoading=!1,this.preOrderFinished=!1,this.preOrdersTotal=0,this.preOrdersPage=0},cancleConfirm:function(e){this.showModal=!0,this.selectedOrder=e},hideModal:function(){this.showModal=!1},cancleOrder:function(){var e=this;this.hideModal(),this.$http.post("public/api/customer/cancelPreOrder.html",{token:this.$global.userInfo.token,order_id:this.selectedOrder.order_id}).then(function(){e.reloadPreOrder()})},orderAgain:function(){this.$router.replace({name:"home"})}}},le=ce,de=(i("5ac2"),Object(h["a"])(le,U,Y,!1,null,null,null));de.options.__file="MyOrder.vue";var ue=de.exports,me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page response"},[i("i",{staticClass:"icon-success"}),i("p",{staticClass:"info"},[e._v("订单提交成功")]),i("div",{staticClass:"goto-myorder",on:{click:function(t){e.goToMyOrder()}}},[e._v("查看订单")]),i("div",{staticClass:"return-home",on:{click:function(t){e.goHome()}}},[e._v("继续下单")])])},he=[],pe={name:"response",created:function(){console.log(this.$router.query)},methods:{goHome:function(){this.$router.replace({name:"home"})},goToMyOrder:function(){this.$router.replace({name:"myorder"})}},data:function(){return{}}},fe=pe,ve=(i("dbc2"),Object(h["a"])(fe,me,he,!1,null,"23c9c0b7",null));ve.options.__file="Response.vue";var ge=ve.exports,be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bind-form"},[i("div",{staticStyle:{"margin-bottom":"10px"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],staticClass:"mobile input",attrs:{type:"search",maxlength:"11",placeholder:"请输入手机号"},domProps:{value:e.mobile},on:{input:function(t){t.target.composing||(e.mobile=t.target.value)}}})]),i("div",{staticStyle:{display:"flex"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.captcha,expression:"captcha"}],staticClass:"captcha input",attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:e.captcha},on:{input:function(t){t.target.composing||(e.captcha=t.target.value)}}}),i("span",{staticClass:"button captcha",class:{active:e.validMobile},on:{click:function(t){e.getCaptcha()}}},[e._v(e._s(e.captchaText))])]),i("div",{staticClass:"button submit",class:{active:e.validForm},on:{click:function(t){e.submit()}}},[e._v("绑定账户")]),e.error?i("div",[e._v(e._s(e.error))]):e._e()])},_e=[],Ce={name:"bindaccount",created:function(){var e=this;this.$http.post("public/api/customer/get_user_info_by_token.html",{token:this.$global.userInfo.token}).then(function(t){t.data.data.mobile&&(e.$global.userInfo.mobile=t.data.data.mobile,e.$global.userInfo.more=t.data.data.more,e.$router.replace("myorder"))}).catch(function(e){console.log(e)})},computed:{validMobile:function(){return this.mobile&&11===this.mobile.length},validForm:function(){return this.validMobile&&this.captcha},captchaText:function(){return this.waiting?this.waiting+"秒":"获取验证码"}},methods:{getCaptcha:function(){var e=this;this.validMobile&&!this.waiting&&this.$http.post("public/api/customer/sendSmsCode.html",{token:this.$global.userInfo.token,phone:this.mobile}).then(function(){e.setWaiting()}).catch(function(t){e.$toast("发送失败")})},setWaiting:function(){var e=this;this.waiting=60;var t=setInterval(function(){0!==e.waiting?e.waiting--:clearInterval(t)},1e3)},submit:function(){var e=this;if(this.validMobile){var t={token:this.$global.userInfo.token,phone:this.mobile,captcha:this.captcha};this.$route.query&&this.$route.query.mid&&(t.mid=this.$route.query.mid),this.$http.post("public/api/customer/bind.html",t).then(function(t){e.$global.userInfo.mobile=e.mobile;var i=t.data.data.token;i&&"string"===typeof i&&e.$global.userInfo.token!==i&&(e.$global.userInfo.token=i,localStorage.setItem("userInfo",JSON.stringify(e.$global.userInfo))),e.$global.selected.length?e.$router.replace({name:"order"}):e.$router.replace({name:"home"})}).catch(function(t){e.$toast(t.data.msg)})}}},data:function(){return{mobile:"",captcha:"",waiting:0,error:null}}},ke=Ce,$e=(i("b54c"),Object(h["a"])(ke,be,_e,!1,null,"015d4b04",null));$e.options.__file="BindAccount.vue";var ye=$e.exports,Oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page price"},[i("div",{staticClass:"price-head"},[i("h2",{staticClass:"section-head"},[e._v("\n            今日资源回收价\n        ")]),i("div",{staticClass:"tab"},[e._l(e.goods,function(t){return[i("div",{key:t.id,staticClass:"tablinks",class:{active:e.selectedTab===t.name},on:{click:function(i){e.selectedTab=t.name}}},[i("div",{staticClass:"tablinks-title"},[e._v("\n                        "+e._s(t.name)+"\n                    ")])])]})],2)]),i("div",{staticClass:"price-wrapper"},[e._l(e.goods,function(t){return[e.selectedTab===t.name?i("table",{staticClass:"tabcontent"},[e._m(0,!0),e._l(t.items,function(t){return i("tr",[i("td",[e._v(e._s(t.name))]),i("td",[e._v(e._s(t.unit))]),i("td",[e._v(e._s(t.purchasing_point))])])})],2):e._e()]})],2),i("div",{staticClass:"price-footer"},[i("div",{staticClass:"price-submit",on:{click:function(t){e.goHome()}}},[e._v("\n            立即下单\n        ")])])])},we=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("tr",[i("th",[e._v("类型")]),i("th",[e._v("单位")]),i("th",[e._v("积分")])])}],xe={created:function(){var e=this;this.$http.post("public/api/common/getGoods.html").then(function(t){e.goods=t.data.data,e.selectedTab=e.goods[0].name}).catch(function(e){console.log(e)})},data:function(){return{selectedTab:"",goods:[]}},methods:{goHome:function(){this.$router.push({name:"home"})}}},Pe=xe,Te=(i("8733"),Object(h["a"])(Pe,Oe,we,!1,null,"77cc5b98",null));Te.options.__file="Price.vue";var Ie=Te.exports,Se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("button",{on:{click:function(t){e.openPicker()}}},[e._v("按钮")]),i("DatePicker",{ref:"datePicker",on:{change:e.onChange,confirm:e.onConfirm}})],1)},De=[],je=i("e94a"),Ee={components:{DatePicker:je["a"]},methods:{openPicker:function(){this.$refs["datePicker"].open()},onChange:function(e){console.log(e)},onConfirm:function(e){console.log(e)}}},Ve=Ee,Me=Object(h["a"])(Ve,Se,De,!1,null,null,null);Me.options.__file="test.vue";var Ne=Me.exports;d["a"].use(y["a"]);var Ae=new y["a"]({routes:[{path:"/",name:"home",component:I,meta:{title:"预约下单",auth:!0}},{path:"/pick",name:"pick",component:M,meta:{title:"爱分类爱回收",keepAlive:!1}},{path:"/multipick",name:"multipick",component:J,meta:{title:"爱分类爱回收",keepAlive:!1}},{path:"/order",name:"order",component:z,meta:{title:"爱分类爱回收",auth:!0}},{path:"/myorder",name:"myorder",component:ue,meta:{title:"爱分类爱回收",auth:!0}},{path:"/response",name:"response",component:ge,meta:{title:"爱分类爱回收",auth:!0}},{path:"/bindaccount",name:"bindaccount",component:ye,meta:{title:"绑定账户",auth:!0}},{path:"/price",name:"price",component:Ie,meta:{auth:!1}},{path:"/test",name:"test",component:Ne,meta:{title:"测试"}}]}),Le=(i("3b2b"),{getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=i.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}}),Fe=(i("6418"),i("858f"),i("f5df"),i("bc3a")),He=i.n(Fe);i("6d29"),i("d500");d["a"].use(a["a"]).use(s["a"]).use(n["a"]).use(r["a"]).use(o["a"]).use(c["a"]).use(l["a"]),d["a"].prototype.$http=He.a,d["a"].prototype.$global=$,d["a"].config.productionTip=!1,He.a.interceptors.response.use(function(e){return 1===e.data.code?e:2!==e.data.code?Promise.reject(e):(localStorage.removeItem("userInfo"),void(window.location.pathname="public/api/customer/get_user_info.html"))},function(e){return Promise.reject(e)}),Ae.beforeEach(function(e,t,i){if(document.title=e.meta.title||"爱分类爱回收",e.meta.auth&&!d["a"].prototype.$global.userInfo){var a=window.localStorage.getItem("userInfo");if(a)d["a"].prototype.$global.userInfo=JSON.parse(a),i();else{var s=Le.getParameterByName("token");if(s){d["a"].prototype.$global.userInfo={token:s},localStorage.setItem("userInfo",JSON.stringify(d["a"].prototype.$global.userInfo));var n=localStorage.getItem("redirect");n?Ae.replace(n,function(){localStorage.removeItem("redirect")}):i()}else e.name&&"home"!==e.name&&localStorage.setItem("redirect",e.name),window.location.pathname="public/api/customer/get_user_info.html"}}else i()}),new d["a"]({router:Ae,render:function(e){return e(b)}}).$mount("#app")},"5ac2":function(e,t,i){"use strict";var a=i("4170"),s=i.n(a);s.a},"5c0b":function(e,t,i){"use strict";var a=i("2856"),s=i.n(a);s.a},"5e6e":function(e,t,i){},6418:function(e,t,i){},7021:function(e,t,i){},"75b0":function(e,t,i){"use strict";var a=i("e28c"),s=i.n(a);s.a},"858f":function(e,t,i){},8733:function(e,t,i){"use strict";var a=i("5e6e"),s=i.n(a);s.a},b547:function(e,t,i){"use strict";(function(e){i("a481"),i("7f7f"),i("28a5"),i("cadf"),i("551c"),i("097d");var a=i("e94a");t["a"]={name:"order",components:{DatePicker:a["a"]},beforeRouteEnter:function(e,t,i){i(function(e){e.$global.userInfo&&e.$global.userInfo.mobile||i({replace:!0,name:"bindaccount"})})},mounted:function(){var t=this,i=this,a=new Date,s=a.toISOString().split("T")[0];i.today=s;var n=s.split("-");i.date=n[0]+"年"+n[1]+"月"+n[2]+"日(09:30-18:00)",e("#datetime-picker").datetimePicker({yearSplit:"年",monthSplit:"月",dateSplit:"日",min:s,times:function(){return[{values:["上午(09:30-12:00)","下午(13:00-18:00)"]}]},title:"",value:s+(a.getHours()<11?" 上午(09:30-12:00)":" 下午(13:00-18:00)"),onClose:function(e){var t=e.value;i.date=t[0]+"年"+t[1]+"月"+t[2]+"日 "+t[3],i.dataValues=t}}),this.$http.post("public/api/customer/get_user_info_by_token.html",{token:this.$global.userInfo.token}).then(function(a){if(a.data&&a.data.data){if(t.$global.userInfo.more=a.data.data.more,t.$global.userInfo.more&&(t.mobile=t.$global.userInfo.more.mobile||"",t.userName=t.$global.userInfo.more.name||"",t.$global.userInfo.more.addr)){var s=t.$global.userInfo.more.addr.split(" ");t.addressDetail=s[2],t.community=[s[0],s[1]].join(" "),e("#communityPicker").val(t.community)}t.$http.post("http://arcfun.0lz.net/public/api/common/getArea.html").then(function(t){var a=t.data.data;i.area=a;e("#communityPicker").picker({title:"",cols:[{textAlign:"left",values:a[0].items.map(function(e){return e.name})},{textAlign:"left",values:a[0].items[0].items.map(function(e){return e.name})}],onClose:function(e){i.area_id=a[0].items[e.cols[0].activeIndex].items[e.cols[1].activeIndex].id,i.community=e.value.join(" ")}})}).catch(function(e){console.log(e)})}}).catch(function(e){console.log(e)})},methods:{getAreaId:function(){var e,t=this.community.split(" "),i=this.area[0].items;console.log(JSON.stringify(i));for(var a=0;a<i.length;a++)if(t[0]===i[a].name){for(var s=i[a].items,n=0;n<s.length;n++)if(t[1]===s[n].name){e=s[n].id;break}break}return e},openPicker:function(){this.$refs.picker.open()},onCommunityPickerChange:function(e,t){e.setColumnValues(1,communities[t[0]])},onCommunityPickerConfirm:function(e,t){this.showCommunityPicker=!1,this.community=e.join(" ")},hasError:function(e){return this.errors[e]},selectedText:function(e){return this.picked.selected?this.picked.selected.map(function(e){return e.name}).join(e||" "):""},triggerTimePicker:function(){var e=this.$refs.timePicker;e.click()},formateDate:function(){if(this.date)return new Date(this.date).toLocaleString()},submitOrder:function(){var e=this;if("2018"==this.dataValues[0]&&"09"==this.dataValues[1]&&"24"==this.dataValues[2]||"2018"==this.dataValues[0]&&"10"==this.dataValues[1]&&("01"==this.dataValues[2]||"02"==this.dataValues[2]||"03"==this.dataValues[2]))this.$toast("抱歉,当天不提供服务");else if(console.log(this.dataValues),console.log(this.today),this.dataValues.length&&new Date(this.dataValues[0]+"-"+this.dataValues[1]+"-"+this.dataValues[2])<new Date(this.today))this.$toast("请重新选择预约时间");else if(this.userName)if(this.$set(this.errors,"userName",!1),this.mobile&&11===this.mobile.length)if(this.$set(this.errors,"mobile",!1),this.community)if(this.$set(this.errors,"community",!1),this.addressDetail){this.$set(this.errors,"addressDetail",!1),this.area_id||(this.area_id=this.getAreaId());var t=this.selectedText("、");t?this.picked.itemType.name+"、"+this.selectedText("、"):this.picked.itemType.name,this.$http.post("public/api/customer/addPreOrder.html",{time:this.dataValues.length?this.dataValues[0]+"年"+this.dataValues[1]+"月"+this.dataValues[2]+"日 "+this.dataValues[3]:this.date,name:this.userName,phone:this.mobile,addr:this.community+" "+this.addressDetail,area_id:this.area_id,goods:this.picked.selected,addition:this.addition?1:0,token:this.$global.userInfo.token}).then(function(){e.$router.replace({name:"response"}),e.$global.selected=[],e.$global.itemType=null}).catch(function(t){e.$toast("提交失败")})}else this.$set(this.errors,"addressDetail",!0);else this.$set(this.errors,"community",!0);else this.$set(this.errors,"mobile",!0);else this.$set(this.errors,"userName",!0)}},data:function(){return{errors:{},addition:!1,mobile:"",community:"",area:[],area_id:null,addressDetail:"",userName:"",date:null,dataValues:[],picked:{selected:this.$global.selected,itemType:this.$global.itemType}}}}}).call(this,i("1157"))},b54c:function(e,t,i){"use strict";var a=i("4609"),s=i.n(a);s.a},dbc2:function(e,t,i){"use strict";var a=i("7021"),s=i.n(a);s.a},e28c:function(e,t,i){},e823:function(e,t,i){"use strict";var a=i("f17b"),s=i.n(a);s.a},e94a:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("van-popup",{attrs:{position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:e.columns},on:{confirm:e.onConfirm,cancel:e.cancle,change:e.onChange}})],1)},s=[],n=(i("6762"),i("2fdb"),i("6b54"),i("f576"),i("cadf"),i("551c"),i("097d"),new Date),r={name:"DatePicker",data:function(){return{currentValues:[],years:this.range(n.getFullYear(),3),months:this.range(1,12),days:[],extend:["上午","下午"],columns:[],show:!1}},created:function(){this.days=this.getDays(this.years[0],this.months[0]),this.columns=[{values:this.years},{values:this.months},{values:this.days},{values:this.extend}],this.currentValues=[this.columns[0],this.columns[1],this.columns[2],this.columns[3]]},methods:{open:function(){this.show=!0},close:function(){this.show=!1},getDays:function(e,t){var i=[];return i=2==t?e%4===0&&e%100!==0||e%400===0?this.range(1,29):this.range(1,28):4==t||6==t||9==t||11==t?this.range(1,30):this.range(1,31),i},range:function(e,t){for(var i=[],a=e,s=0;s<t;s++)i.push(a.toString().padStart(2,"0")),a++;return i},onChange:function(e,t){if(this.currentValues[0]!==t[0]||this.currentValues[1]!==t[1]){var i=t[2],a=this.getDays(t[0],t[1]);e.setColumnValues(2,a),a.includes(i)&&this.$nextTick(function(){e.setColumnValue(2,i)})}this.currentValues=t,this.$emit("change",t)},onConfirm:function(){this.close(),this.$emit("confirm",this.currentValues)},cancle:function(){this.close(),this.$emit("cancel")}}},o=r,c=(i("75b0"),i("2877")),l=Object(c["a"])(o,a,s,!1,null,"bd093ce2",null);l.options.__file="DatePicker.vue";t["a"]=l.exports},f17b:function(e,t,i){}});
//# sourceMappingURL=app.36aff206.js.map